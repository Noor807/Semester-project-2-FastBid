import{a as c,b as d,c as l}from"./constants-D-ym1ySC.js";async function g(a,e){try{const t=`${c}/${a}`,o={"Content-Type":"application/json",Authorization:`Bearer ${e}`,"X-Noroff-API-Key":d},r=await fetch(t,{method:"GET",headers:o});if(!r.ok){const i=await r.json();throw new Error(i.message||"Failed to delete auction listing.")}const n=await r.json(),{credits:s}=n.data;localStorage.setItem("credit",s)}catch(t){throw console.error("Error deleting auction listing:",t),t}}async function f({email:a,password:e}){try{const t=await fetch(l,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a,password:e})});if(!t.ok){const n=await t.json();throw new Error(n.message||"Login failed")}const o=await t.json();localStorage.setItem("token",o.data.accessToken);const r=o.data;return localStorage.setItem("adminUser",JSON.stringify(r)),await g(o.data.name,o.data.accessToken),o}catch(t){throw console.error("Error during login:",t),t}}async function m(a){a.preventDefault();const e=a.target.email.value,t=a.target.password.value;try{const o=await f({email:e,password:t});sessionStorage.setItem("loggedIn","true"),window.location.href="/"}catch(o){console.error("Login failed:",o),alert("Login failed. Please check your credentials and try again.")}}const h=document.forms.login;h.addEventListener("submit",m);
