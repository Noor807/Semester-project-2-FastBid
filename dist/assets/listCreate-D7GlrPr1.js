import{s as m,o as u}from"./hamburgerMenu-Mj8nOhEq.js";import{A as g}from"./constants-BFXYqvjv.js";import{p as c}from"./authUtils-C1C3arbU.js";import{t as n}from"./toastMsg-pxLBbmNp.js";import{a as f}from"./authGuard-C2GFzsuy.js";async function p(t){if(!t||typeof t!="object")throw new Error("Invalid form data provided.");const o=g,a=c();try{const e=await fetch(o,{method:"POST",headers:a,body:JSON.stringify(t)});if(!e.ok){const i=await e.json();throw new Error(i.message||"Failed to create auction listing.")}return await e.json()}catch(e){throw console.error("Error creating auction listing:",e),new Error(`Failed to create auction listing: ${e.message}`)}}async function h(t){t.preventDefault();const o=t.target.endsAt.value.trim(),a=t.target.title.value.trim(),e=t.target.description.value.trim(),s=t.target.mediaUrl.value.trim(),i=t.target.mediaAlt.value.trim(),l=t.target.tags.value?t.target.tags.value.split(",").map(r=>r.trim()):[];if(!a||!e){n("Title and body are required.","alert");return}const d={title:a,description:e,tags:l,media:s?[{url:s,alt:i}]:null,endsAt:o};try{const r=await p(d);window.location.href=`/post/index.html?singleList=${r.data.id}`,n("List created successfully!","success")}catch(r){console.error("Error:",r),n("Failed to create list: "+r.message,"alert")}}function w(){m(),c(),f(),document.getElementById("new-list-form").addEventListener("submit",h),document.getElementById("logout-Btn").addEventListener("click",u)}w();
